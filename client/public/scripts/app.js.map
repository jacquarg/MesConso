{"version":3,"file":"public/scripts/app.js","sources":["app/application.js","app/collections/pcabstracts.js","app/collections/persons.js","app/collections/phonecommunicationlogs.js","app/collections/receipts.js","app/collections/receipttotals.js","app/collections/sections.js","app/initialize.js","app/models/pcabstract.js","app/models/person.js","app/models/phonecommunicationlog.js","app/models/receipt.js","app/models/receiptaggregate.js","app/models/receipttotal.js","app/models/section.js","app/router.js","app/templates/brandpanel.jade","app/templates/home.jade","app/templates/intermarche.jade","app/templates/pcabstract.jade","app/templates/pcldata.jade","app/templates/person.jade","app/templates/phonecommunicationlog.jade","app/templates/receipt.jade","app/templates/receiptaggregate.jade","app/templates/receiptdetail.jade","app/templates/receiptmonth.jade","app/templates/section.jade","app/views/app_view.js","app/views/intdays.js","app/views/intermarche.js","app/views/intmonth.js","app/views/orange.js","app/views/pcabstract.js","app/views/person.js","app/views/phonecommunicationlog.js","app/views/receipt.js","app/views/receiptmonth.js","app/views/receiptmonthaggregate.js","app/views/section.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AALA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AALA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AALA;;A,CCAA;;AACA;AACA;AACA;AAHA;;A,CCAA;;AACA;AACA;AACA;AAHA;;A,CCAA;;AACA;AACA;AACA;AACA;AAJA;;A,CCAA;;AACA;AACA;AACA;AAHA;;A,CCAA;;AACA;AACA;AACA;AAHA;;A,CCAA;;AACA;AACA;AACA;AAHA;;A,CCAA;;AACA;AACA;AACA;AACA;AAJA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApGA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/DA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjFA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7BA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjEA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzGA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzEA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxEA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxEA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;;A","sourcesContent":["module.exports = {\n\n    initialize: function() {\n        var Router = require('router');\n        this.router = new Router();\n        Backbone.history.start();\n    }\n};","PCAbstract = require('../models/pcabstract');\nmodule.exports = PCAbstracts = Backbone.Collection.extend({\n\n    url: 'pcabstracts',\n    model: PCAbstract,\n\n});\n","Person = require('../models/person');\nmodule.exports = Persons = Backbone.Collection.extend({\n\n    url: 'persons',\n    model: Person\n\n});\n","Receipt = require('../models/phonecommunicationlog');\nmodule.exports = PhoneCommunicationLogs = Backbone.Collection.extend({\n\n    initialize: function(models, options) {\n        this.date = options.date;\n    },\n    \n    url: function() {\n        return 'pcls/' + this.date ;\n    },\n    model: PhoneCommunicationLog,\n\n});\n","Receipt = require('../models/receipt');\nmodule.exports = Receipts = Backbone.Collection.extend({\n    model: Receipt,\n    url: 'receipts'\n})\n","Receipt = require('../models/receipttotal');\nmodule.exports = ReceiptTotals = Backbone.Collection.extend({\n    model: ReceiptTotal,\n    url: 'receipts/totalsbymonth'\n})\n","Receipt = require('../models/section');\nmodule.exports = Sections = Backbone.Collection.extend({\n\n    initialize: function(models, options) {\n        this.receiptId = options.receiptId;\n    },\n    \n    url: function() {\n        return 'receipts/' + this.receiptId + '/sections';\n    },\n    model: Section,\n\n});\n","// The function called from index.html\n$(document).ready(function() {\n    var app = require('application');\n    app.initialize()\n});\n","module.exports = PCAbstract = Backbone.Model.extend({\n\n})\n","module.exports = Person = Backbone.Model.extend({\n\n});\n","module.exports = PhoneCommunicationLog = Backbone.Model.extend({\n\n});\n\n","module.exports = Receipt = Backbone.Model.extend({\n\n})\n","module.exports = ReceiptAggregate = Backbone.Model.extend({\n\n})\n","module.exports = ReceiptTotal = Backbone.Model.extend({\n\n})\n","module.exports = Section = Backbone.Model.extend({\n\n});\n\n","var AppView = require('views/app_view');\n//var ReceiptDetailCollection = require('collections/receiptdetails');\n\n//var receiptDetails = new ReceiptDetailCollection();\n\nmodule.exports = Router = Backbone.Router.extend({\n\n    routes: {\n        '': 'main'\n    },\n\n    main: function() {\n        var mainView = new AppView({\n  //          collection: receiptDetails\n        });\n        mainView.render();\n    }\n});\n","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"consocontainer\"><div class=\"consoheader\"><h3><img id=\"loader\" src=\"img/ajax-loader.gif\"/>&nbsp;');\nvar __val__ = title \nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h3></div><div id=\"list\" class=\"consoinner\"></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"container\"><div id=\"fix\"></div><div class=\"miframe\"><div class=\"miframeheader\"><h2>MesInfos de consommation</h2></div><div class=\"miframeinner\"><div class=\"row\"><div class=\"col-xs-6 text-center\"><img id=\"courses\" src=\"img/Intermarche.png\" class=\"brand\"/></div><div class=\"col-xs-6 text-center\"><img id=\"cra\" src=\"img/Orange.png\" class=\"brand\"/></div></div><div id=\"content\"></div></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"consocontainer\"><div class=\"consoheader\"><h3><img id=\"loader\" src=\"img/ajax-loader.gif\"/>&nbsp;');\nvar __val__ = title \nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h3></div><div class=\"consoinner\"><div class=\"row\"><div id=\"day\" class=\"col-xs-6 period_button-selected\">Jour</div><div id=\"month\" class=\"col-xs-6 period_button\">Mois        </div></div><div id=\"list\"></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"row item_a pcabstract\"><div class=\"col-md-6\"><div class=\"row\"><div class=\"col-xs-5 box date\">');\n var d = new Date(pcabstract.key)\nvar __val__ = d.toString('ddd d MMM')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div><div title=\"Nombres d\\'appels ce jour\" class=\"col-xs-3 box\">');\nvar __val__ = pcabstract.value.calls\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('&nbsp;<img src=\"img/Tel.png\"/></div><div title=\"Durée totale d\\'appels ce jour\" class=\"col-xs-4 box callsduration\">');\n var min = Math.floor(pcabstract.value.callsDuration / 60)\n var sec = pcabstract.value.callsDuration % 60\nvar __val__ = min\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('’');\nvar __val__ = sec\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('”</div></div></div><div class=\"col-md-6\"><div class=\"row\"><div title=\"Nombres de SMS échangés ce jour\" class=\"col-xs-3 box\">');\nvar __val__ = pcabstract.value.sms\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('&nbsp;<img src=\"img/SMS.png\"/></div><div title=\"Data échangées ce jour\" class=\"col-xs-6 box\">');\n var total = pcabstract.value.data ;\n var unity = 'o';\n var totalStr = total;\n if (total > 1000000)\n{\n total = total / 1000000 ;\n totalStr = total.toFixed(2);\n unity = 'Mo';\n}\n else if (total > 1000)\n{\n total = pcabstract.value.data/1000;\n totalStr = total.toFixed(2);\n unity = 'ko';\n}\nvar __val__ = totalStr\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('<span class=\"unity\">');\nvar __val__ = unity\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span>&nbsp;<img src=\"img/Data.png\"/></div><div class=\"col-xs-1 box\"></div><div title=\"Cliquez pour plus de détails\" class=\"col-xs-2 box toggle\"><img src=\"img/plus.png\" class=\"toggle-btn\"/></div></div></div></div><div class=\"row list_b pcls\"></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"col-md-3\">');\n var dt = new Date(pcl.timestamp)\nbuf.push('<p>');\nvar __val__ = dt.getHours()\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push(':');\nvar __val__ = dt.getMinutes()\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p>');\nvar __val__ = pcl.timestamp\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p>');\nvar __val__ = pcl.latitude\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push(',');\nvar __val__ = pcl.longitude\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p>');\nvar __val__ = pcl.type\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p>');\nvar __val__ = pcl.direction\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p>');\nvar __val__ = pcl.correspondantNumber\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p>');\nvar __val__ = pcl.chipCount\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('<p>');\nvar __val__ = pcl.chipType\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></p></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"miframe\"><div class=\"miframeheaderhid\"></div><div class=\"miframeinner\"><div class=\"row person\"><div class=\"col-md-5\"><div class=\"row\"><div class=\"col-xs-3\"><img src=\"img/Bonhomme.png\" class=\"img-responsive\"/></div><div class=\"col-xs-9\"><p class=\"nomprenom\">');\nvar __val__ = person.firstname.toLowerCase()\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('&nbsp;');\nvar __val__ = person.lastname.toLowerCase()\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p>');\n var bDate = new Date(person.birthdate)\n //p= person.birthdate\nbuf.push('<p>');\nvar __val__ = bDate.toString('dddd d MMMM yyyy')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"address\">');\nvar __val__ = person.address1.toLowerCase()\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('<br/>');\nvar __val__ = person.postcode\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('&nbsp;');\nvar __val__ = person.city.toLowerCase()\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('<br/>');\n if (person.countryCode = 'FR')\n{\nbuf.push('France');\n}\n else\n{\nvar __val__ = person.countryCode\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</p></div></div></div><div class=\"col-md-7\"><div class=\"row\"><div class=\"col-sm-6\">');\n if (person.phoneNumber && person.phoneNumber.length == 9)\n{\n var numStr = '0' + person.phoneNumber.substring(0, 1) +'&thinsp;' + person.phoneNumber.substring(1, 3) + '&thinsp;' + person.phoneNumber.substring(3, 5) + '&thinsp;' + person.phoneNumber.substring(5, 7) + '&thinsp;'+ person.phoneNumber.substring(7, 9)\nbuf.push('<p>');\nvar __val__ = numStr\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p>');\n}\nelse\n{\nbuf.push('<p>');\nvar __val__ = person.phoneNumber\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p>');\n}\nbuf.push('<p>');\nvar __val__ = person.email\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p>');\nvar __val__ = person.csp\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p>');\nvar __val__ = person.maritalStatus\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></div><div class=\"col-sm-6\"><p>');\n if (person.childrenCount == 0)\n{\nbuf.push('Aucun enfant');\n}\n else\n{\nvar __val__ = person.childrenCount\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n if (person.childrenCount == 1)\n{\nbuf.push('&nbsp; enfant :');\n}\n else\n{\nbuf.push('&nbsp; enfants :');\n}\n}\n for (var i=1; i<6; i++)\n{\n if (person['birthdateChild' + i])\n{\n var cBD = new Date(person['birthdateChild' + i])\nbuf.push('<br/>');\nvar __val__ = i\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('° enfant né le ');\nvar __val__ = cBD.toString('dddd d MMMM yyyy')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\n}\nbuf.push('</p><p>');\nvar __val__ = person.drivingLicence\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></div></div></div></div><div class=\"origin\"><img');\nbuf.push(attrs({ 'src':(\"img/\" + (person.origin.toLowerCase()) + \"nb.png\"), \"class\": ('img-responsive') }, {\"src\":true}));\nbuf.push('/></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"col-md-3 pcl\">');\n var dt = new Date(pcl.timestamp)\nbuf.push('<div class=\"time\">');\nvar __val__ = dt.toString('H:mm')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div><div>');\n if (pcl.longitude)\n{\nbuf.push('<a');\nbuf.push(attrs({ 'href':(\"http://www.openstreetmap.org/?mlat=\" + (pcl.latitude) + \"&mlon=\" + (pcl.longitude) + \"#map=17/\" + (pcl.latitude) + \"/\" + (pcl.longitude) + \"\"), 'target':(\"_blank\"), 'title':(\"Lieu de la communication.\") }, {\"href\":true,\"target\":true,\"title\":true}));\nbuf.push('><img src=\"img/Geoloc.png\"/></a>');\n}\n if (pcl.type == \"VOICE\")\n   var typeStr = \"Appel\";\n else\n   var typeStr = \"SMS\"\nbuf.push('<img');\nbuf.push(attrs({ 'src':(\"img/\" + (pcl.type) + \".png\"), 'title':(typeStr) }, {\"src\":true,\"title\":true}));\nbuf.push('/>');\n if (pcl.direction == \"INCOMING\")\n   var directionStr = \"entrante\";\n else if (pcl.direction == \"OUTGOING\")\n   var directionStr = \"sortante\";\n else\n   var directionStr = 'bidirectionnelle';\nbuf.push('<img');\nbuf.push(attrs({ 'src':(\"img/\" + (pcl.direction) + \".png\"), 'title':(\"Communication \" + (directionStr) + \"\") }, {\"src\":true,\"title\":true}));\nbuf.push('/>');\n if (pcl.correspondantNumber && pcl.correspondantNumber.length == 11 && pcl.correspondantNumber.substring(0, 2) == '33')\n{\n var numStr = '+33' + '&thinsp;' + pcl.correspondantNumber.substring(2, 3) + '&thinsp;' + pcl.correspondantNumber.substring(3, 5) + '&thinsp;' + pcl.correspondantNumber.substring(5, 7) + '&thinsp;'+ pcl.correspondantNumber.substring(7, 9) + '&thinsp;' + pcl.correspondantNumber.substring(9, 11)\nbuf.push('<div title=\"Numéro du correspondant\" class=\"correspondantNumber\">');\nvar __val__ = numStr\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div>');\n}\n else\n{\nbuf.push('<div title=\"Numéro du correspondant\" class=\"correspondantNumber\">');\nvar __val__ = pcl.correspondantNumber\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div>');\n}\nbuf.push('</div><div title=\"Durée de l\\'appel\" class=\"quantity\">');\n if (pcl.type == 'VOICE' && ! isNaN(pcl.chipCount))\n{\n var min = Math.floor(pcl.chipCount / 60)\n var sec = pcl.chipCount % 60\nvar __val__ = min\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('’');\nvar __val__ = sec\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('”');\n}\nbuf.push('</div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"row item_a receipt\"><div class=\"col-md-6\"><div class=\"row\"><div title=\"Détails sur votre magasin.\" class=\"col-xs-2 box map\"><a');\nbuf.push(attrs({ 'href':(\"http://fc1.1bis.com/intermarche/map.asp?id=IMARC\" + (receipt.intermarcheShopId) + \"\"), 'target':(\"_blank\") }, {\"href\":true,\"target\":true}));\nbuf.push('><img src=\"img/pin.png\"/></a></div><div title=\"Date ou vous avez fait des achats.\" class=\"col-xs-5 box\">');\n var dt = new Date(receipt.timestamp)\nvar __val__ = dt.toString('d/MM')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div><div title=\"Heure de votre passage en caisse.\" class=\"col-xs-5 box\">');\nvar __val__ = dt.toString('H:mm')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div></div></div><div class=\"col-md-6\"><div class=\"row\"><div title=\"Nombre d\\'articles.\" class=\"col-xs-5 box\">');\nvar __val__ = receipt.articlesCount\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('&nbsp; articles</div><div title=\"Total du ticket de caisse.\" class=\"col-xs-5 box price\">');\nvar __val__ = receipt.total.toFixed(2)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('€</div><div title=\"Cliquez pour plus de détails\" class=\"col-xs-2 box toggle\"><img src=\"img/plus.png\" class=\"toggle-btn\"/></div></div></div></div><div class=\"sections\"></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"receiptaggregate\"><div class=\"foodproportion\">');\n var foodWidth = kv.foodTotal/kv.total * 100;\nbuf.push('<div');\nbuf.push(attrs({ 'style':(\"width: \" + (foodWidth) + \"%\"), 'title':(\"Total des dépenses de ce mois dans les rayons d'alimentations\"), \"class\": ('food') }, {\"style\":true,\"title\":true}));\nbuf.push('> <div class=\"label\">Alimentaires</div><div class=\"total\">');\nvar __val__ = kv.foodTotal.toFixed(2)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('&nbsp;€</div></div>');\n var notFoodWidth = kv.notFoodTotal/kv.total * 100;\nbuf.push('<div');\nbuf.push(attrs({ 'style':(\"width: \" + (notFoodWidth) + \"%\"), 'title':(\"Total des dépenses de ce mois hors rayon d'alimentation\"), \"class\": ('notfood') }, {\"style\":true,\"title\":true}));\nbuf.push('><div class=\"label\">Autres &nbsp;</div><div class=\"total\">');\nvar __val__ = kv.notFoodTotal.toFixed(2)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('&nbsp;€</div></div><div class=\"clearfix\"></div></div><div class=\"row aggregate\"><div class=\"col-md-6 topsections\"> <h3 title=\"Rayons ou le plus d\\'articles ont été achetés ce mois.\" class=\"top3\">Top 3<div class=\"subtitle\">de vos rayons les plus fréquentés</div></h3><div class=\"inner\"><div class=\"xyframe\"><img');\nbuf.push(attrs({ 'src':(\"img/Sections/\" + (kv.sectionsCount[0].section) + \".png\"), 'title':(\"\" + (kv.sectionsCount[0].sectionLabel) + \"\"), \"class\": ('section1') }, {\"src\":true,\"title\":true}));\nbuf.push('/><img');\nbuf.push(attrs({ 'src':(\"img/Sections/\" + (kv.sectionsCount[1].section) + \".png\"), 'title':(\"\" + (kv.sectionsCount[1].sectionLabel) + \"\"), \"class\": ('section2') }, {\"src\":true,\"title\":true}));\nbuf.push('/><img');\nbuf.push(attrs({ 'src':(\"img/Sections/\" + (kv.sectionsCount[2].section) + \".png\"), 'title':(\"\" + (kv.sectionsCount[2].sectionLabel) + \"\"), \"class\": ('section3') }, {\"src\":true,\"title\":true}));\nbuf.push('/><img src=\"img/podium.png\" class=\"podium\"/></div></div></div><div class=\"col-md-6 topproduct\"><h3 title=\"Le produit le plus acheté ce mois.\">Votre produit phare du mois</h3><div class=\"inner_white\"><div class=\"xyframe\">');\n var receiptDetail = kv.topProduct.receiptDetail;\nbuf.push('<div class=\"label\"><span class=\"count\">');\nvar __val__ = kv.topProduct.count\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span>x&nbsp;');\nvar __val__ = receiptDetail.name\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div><img');\nbuf.push(attrs({ 'src':('http://drive.intermarche.com/ressources/images/produit/zoom/0' + (receiptDetail.barcode) + '.jpg'), 'onerror':(\"if (this.src != 'img/sac.png') this.src = 'img/sac.png';\"), \"class\": ('productimg') }, {\"src\":true,\"onerror\":true}));\nbuf.push('/>');\n if (receiptDetail.quantityLabel)\n{\nbuf.push('<div class=\"quantityDetail\"><span class=\"count\">');\nvar __val__ = kv.topProduct.count\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span>x');\nvar __val__ = receiptDetail.quantityLabel\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div><div class=\"quantityTotal\">=&nbsp;');\nvar __val__ = receiptDetail.quantityWeight * kv.topProduct.count\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('&nbsp;');\nvar __val__ = receiptDetail.quantityUnit\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div>');\n}\nbuf.push('<div class=\"priceDetail\"><span class=\"count\">');\nvar __val__ = kv.topProduct.count\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span>x');\nvar __val__ = receiptDetail.price\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('&nbsp;€</div><div class=\"priceTotal\">=&nbsp;');\nvar __val__ = kv.topProduct.total.toFixed(2)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('&nbsp;€</div></div></div></div></div><div class=\"row aggregate\"><div class=\"col-sm-12 toptotalsections\"><h3>Vos dépenses par rayon</h3><div class=\"inner_r collapsed\">');\n var max = kv.sectionsTotal[0].total\n for (var idx in kv.sectionsTotal)\n{\n var item = kv.sectionsTotal[idx]\n var height = item.total / max * 150;\n var width = Math.max(height, 50);\n var left = (width - height) / 2;\nbuf.push('<div');\nbuf.push(attrs({ 'style':('width: ' + (width) + 'px'), \"class\": ('section') }, {\"style\":true}));\nbuf.push('><img');\nbuf.push(attrs({ 'src':(\"img/Sections/\" + (item.section) + \".png\"), 'title':(\"\" + (item.sectionLabel) + \"\"), 'style':('width: ' + (height) + 'px; left: ' + (left) + 'px'), \"class\": ('sectionlogo') }, {\"src\":true,\"title\":true,\"style\":true}));\nbuf.push('/><div class=\"price\">');\nvar __val__ = item.total.toFixed(2)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('&nbsp;€</div></div>');\n}\nbuf.push('<div class=\"clearfix\"></div></div></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"col-md-4\"><div class=\"row\"><div class=\"receiptdetail\"><img');\nbuf.push(attrs({ 'src':('http://drive.intermarche.com/ressources/images/produit/fiche/0' + (receiptDetail.barcode) + '.jpg'), 'onerror':(\"if (this.src != 'img/sac.png') this.src = 'img/sac.png';\"), \"class\": ('image') }, {\"src\":true,\"onerror\":true}));\nbuf.push('/><div class=\"detail\"><div class=\"lab\">');\nvar __val__ = receiptDetail.name\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div><p class=\"vol\">');\nvar __val__ = receiptDetail.quantityLabel\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p>');\n //p= receiptDetail.amount \n //   | X\nbuf.push('<div class=\"price\">');\nvar __val__ = receiptDetail.price.toFixed(2)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('&nbsp;€ </div></div></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"row item_a receipt\"><div class=\"col-xs-8 box\">');\n var d = new Date(kv.key)\nvar __val__ = d.toString('MMMM yyyy')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div><div title=\"Dépenses chez Intermarché ce mois\" class=\"col-xs-3 box price\">');\nvar __val__ = kv.value.total.toFixed(2)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('€</div><div title=\"Cliquez pour plus de détails\" class=\"col-xs-1 box toggle\"><img src=\"img/plus.png\" class=\"toggle-btn\"/></div></div><div class=\"sections\"></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"sectionhead\"><img');\nbuf.push(attrs({ 'src':(\"img/Sections/\" + (section.section) + \".png\"), 'onerror':(\"if (this.src != 'img/Sections/vide.png') this.src = 'img/Sections/vide.png';\"), 'title':(\"\" + (section.sectionLabel) + \"\"), \"class\": ('sectionlogo') }, {\"src\":true,\"onerror\":true,\"title\":true}));\nbuf.push('/></div><div class=\"sectioninner\"><div class=\"row section\">');\n for (var i2 in section.receiptDetails) {\n   var receiptDetail = section.receiptDetails[i2];\nbuf.push('<div class=\"col-md-4\"><div class=\"row\"><div class=\"receiptdetail\"><img');\nbuf.push(attrs({ 'src':('http://drive.intermarche.com/ressources/images/produit/fiche/0' + (receiptDetail.barcode) + '.jpg'), 'onerror':(\"if (this.src != 'img/sac.png') this.src = 'img/sac.png';\"), \"class\": ('image') }, {\"src\":true,\"onerror\":true}));\nbuf.push('/><div class=\"detail\"><div class=\"lab\">');\nvar __val__ = receiptDetail.name\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div><p class=\"vol\">');\nvar __val__ = receiptDetail.quantityLabel\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p>');\n //p= receiptDetail.amount \n //   | X\nbuf.push('<div class=\"price\">');\nvar __val__ = receiptDetail.price.toFixed(2)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('&nbsp;€ </div></div></div></div></div>');\n }\nbuf.push('</div></div>');\n}\nreturn buf.join(\"\");\n};","var IntermarcheView = require('./intermarche');\nvar ReceiptCollection = require('collections/receipts');\nvar OrangeView = require('./orange');\nvar PCAbstractCollection = require('collections/pcabstracts');\nvar PersonView = require('./person');\n\nmodule.exports = AppView = Backbone.View.extend({\n\n    el: 'body',\n    template: require('../templates/home'),\n\n    // initialize is automatically called once after the view is constructed\n    initialize: function() {\n        console.log(\"Initialize\")\n    },\n    events: {\n        \"click #courses\": \"getCourses\",\n        \"click #cra\": \"getCRA\"\n    },\n    \n    toggleSelection: function(brand) {\n        var other_map = {\n            '#courses': '#cra',\n            '#cra': '#courses'\n        };\n\n        this.$el.find(brand).attr('class', 'brand-selected');\n        this.$el.find(other_map[brand]).attr('class', 'brand');\n\n    },\n    getCourses: function() {\n        var receipts = new ReceiptCollection();\n        intermarcheView = new IntermarcheView({\n            collection: receipts\n        });\n\n        intermarcheView.render()\n        this.$el.find('#content').append(intermarcheView.$el);\n        this.toggleSelection('#courses');\n    },\n\n    getCRA: function() {\n        var pcAbstracts = new PCAbstractCollection();\n        var orangeView = new OrangeView({\n            collection: pcAbstracts\n        });\n\n        orangeView.render()\n        this.$el.find('#content').append(orangeView.$el);\n        this.toggleSelection('#cra');\n\n    },\n\n    render: function() {\n\n        // we render the template\n        this.$el.html(this.template());\n\n        var personView = new PersonView();\n        personView.render();\n\n        this.$el.find('#fix').append(personView.$el);\n    },\n\n});\n","var ReceiptView = require('./receipt');\n\nmodule.exports = IntermarcheView = Backbone.View.extend({\n\n    el: '#content',\n    template: require('../templates/brandpanel'),\n\n    // initialize is automatically called once after the view is constructed\n    initialize: function() {\n        this.listenTo(this.collection, \"add\", this.onReceiptAdded);\n    },\n\n    render: function() {\n\n        // we render the template\n        this.$el.html(this.template({'title': \"Mes Courses\"}));\n\n        // fetch the bookmarks from the database\n        this.collection.fetch();\n    },\n    \n    stopLoader: function() {\n        this.$el.find('#loader').hide()\n    },\n\n    onReceiptAdded: function(receipt) {\n        this.stopLoader();\n        // render the specific element\n        receiptView = new ReceiptView({\n            model: receipt\n        });\n        receiptView.render();\n        this.$el.find('#list').append(receiptView.$el);\n    }\n\n\n});\n","var ReceiptView = require('./receipt');\nvar ReceiptCollection = require('collections/receipts');\nvar ReceiptTotalView = require('./receiptmonth');\nvar ReceiptTotalsCollection = require('collections/receipttotals');\n\nmodule.exports = IntermarcheView = Backbone.View.extend({\n\n    el: '#content',\n    template: require('../templates/intermarche'),\n\n    // initialize is automatically called once after the view is constructed\n    initialize: function() {\n        this.getDays();\n    },\n\n    events: {\n        \"click #day\": \"getDays\",\n        \"click #month\": \"getMonths\"\n    },\n    render: function() {\n\n        // we render the template\n        this.$el.html(this.template({'title': \"Mes Courses\"}));\n\n        // fetch the bookmarks from the database\n//        this.collection.fetch();\n    },\n    \n    showLoader: function(show) {\n        if (show) {\n            this.$el.find('#loader').show();\n        } else {\n            this.$el.find('#loader').hide();\n        }\n    },\n    \n    toggleList: function(period) {\n        \n        var other_map = {\n            '#month': '#day',\n            '#day': '#month'\n        };\n        this.$el.find(period).toggleClass(\"period_button period_button-selected\");\n        this.$el.find(other_map[period]).toggleClass(\"period_button-selected period_button\");\n        \n        //this.$el.find(period).removeClass(\"period_button\").addClass(\"period_button-selected\"); \n\n\n        //this.$el.find(other_map[period]).removeClass(\"period_button-selected\").addClass(\"period_button\"); \n\n        this.stopListening(this.collection);\n        this.$el.find('#list').empty();\n        this.showLoader(true);\n    },\n\n\n    getDays : function() {\n        this.toggleList('#day');\n\n        this.collection = new ReceiptCollection();\n        this.listenTo(this.collection, \"add\", this.onReceiptAdded);\n        this.collection.fetch();\n    },\n\n    onReceiptAdded: function(receipt) {\n        this.showLoader(false);\n        // render the specific element\n        receiptView = new ReceiptView({\n            model: receipt\n        });\n        receiptView.render();\n        this.$el.find('#list').append(receiptView.$el);\n    },\n\n    getMonths : function() {\n        this.toggleList('#month');\n\n        this.collection = new ReceiptTotalsCollection();\n        this.listenTo(this.collection, \"add\", this.onReceiptTotalAdded);\n        this.collection.fetch();\n    },\n\n    onReceiptAdded: function(receipt) {\n        this.showLoader(false);\n        // render the specific element\n        receiptView = new ReceiptView({\n            model: receipt\n        });\n        receiptView.render();\n        this.$el.find('#list').append(receiptView.$el);\n    }, \n    \n    onReceiptTotalAdded: function(data) {\n        this.showLoader(false);\n        // render the specific element\n        rtView = new ReceiptTotalView({\n            model: data\n        });\n        rtView.render();\n        this.$el.find('#list').append(rtView.$el);\n        \n    } \n\n\n});\n","var ReceiptView = require('./receipt');\n\nmodule.exports = IntermarcheView = Backbone.View.extend({\n\n    el: '#content',\n    template: require('../templates/brandpanel'),\n\n    // initialize is automatically called once after the view is constructed\n    initialize: function() {\n        this.listenTo(this.collection, \"add\", this.onReceiptAdded);\n    },\n\n    render: function() {\n\n        // we render the template\n        this.$el.html(this.template({'title': \"Mes Courses\"}));\n\n        // fetch the bookmarks from the database\n        this.collection.fetch();\n    },\n    \n    stopLoader: function() {\n        this.$el.find('#loader').hide()\n    },\n\n    onReceiptAdded: function(receipt) {\n        this.stopLoader();\n        // render the specific element\n        receiptView = new ReceiptView({\n            model: receipt\n        });\n        receiptView.render();\n        this.$el.find('#list').append(receiptView.$el);\n    }\n\n\n});\n","var PCAbstractView = require('./pcabstract');\n\nmodule.exports = OrangeView = Backbone.View.extend({\n\n    el: '#content',\n    template: require('../templates/brandpanel'),\n\n    // initialize is automatically called once after the view is constructed\n    initialize: function() {\n        this.listenTo(this.collection, \"add\", this.onPCAbstractAdded);\n    },\n\n    render: function() {\n\n        // we render the template\n        this.$el.html(this.template({'title': \"Mes Communications\"}));\n\n        // fetch the bookmarks from the database\n        this.collection.fetch();\n    },\n\n    stopLoader: function() {\n        this.$el.find('#loader').hide()\n    },\n\n    onPCAbstractAdded: function(item) {\n        this.stopLoader();\n        // render the specific element\n        itemView = new PCAbstractView({\n            model: item\n        });\n        itemView.render();\n        this.$el.find('#list').append(itemView.$el);\n    }\n\n\n})\n","var ItemView = require('./phonecommunicationlog');\nvar Collection = require('../collections/phonecommunicationlogs');\n\n\nmodule.exports = PCAbstractView = Backbone.View.extend({\n\n    tagName: 'div',\n    template: require('../templates/pcabstract'),\n    events: {\n        \"click .item_a\": \"toggleList\",    \n        //\"click .toggle\": \"toggleSectionsNoDefault\"    \n    },\n\n    initialize: function() {\n//        this.collection = new Collection([], { date: this.model.attributes.key });\n        \n    },\n\n    render: function() {\n        this.$el.html(this.template({\n            pcabstract: this.model.toJSON()\n        }));\n    },\n\n    btnState: function(state) {\n        var states = {\n            'opened': \"img/moins.png\",\n            'closed': \"img/plus.png\",\n            'loading': \"img/ajax-loader_b.gif\",\n        };\n        this.$el.find('.toggle-btn').attr('src', states[state]);\n    },\n\n    toggleList: function(event) {\n        if (!this.open) {\n            this.open = true;\n            // submit button reload the page, we don't want that\n            //event.preventDefault();\n\n            this.btnState('loading');\n\n            //Seems dirty..\n            this.collection = new Collection([], { date: this.model.attributes.key });\n            \n            this.listenTo(this.collection, \"add\", this.onItemAdded);\n            // fetch the bookmarks from the database\n            this.collection.fetch();\n            //this.$el.find('.toggle-btn').attr('src', \"img/moins.png\");\n\n        } else {\n\n            this.btnState('closed');\n            this.stopListening(this.collection);\n            this.$el.find('.list_b').empty();\n\n            this.open = false;\n        }\n    },\n\n    onItemAdded: function(item) {\n        this.btnState('opened');\n\n        // render the specific element\n        var itemView = new ItemView({\n            model: item\n        });\n        itemView.render();\n        this.$el.find('.list_b').append(itemView.$el);\n    }\n    \n    \n});\n\n","var PersonCollection = require('../collections/persons');\n\nmodule.exports = Person = Backbone.View.extend({\n\n    tagName: 'div',\n    template: require('../templates/person'),\n\n    // initialize is automatically called once after the view is constructed\n    initialize: function() {\n        this.collection = new PersonCollection();\n        this.listenTo(this.collection, \"add\", this.onPersonAdded);\n    },\n\n    render: function() {\n\n //       // we render the template\n\n        // fetch the bookmarks from the database\n        this.collection.fetch();\n    },\n\n\n    onPersonAdded: function(person) {\n        if (this.oneTime) {\n            return;\n        }\n        this.oneTime = true;\n\n        this.$el.html(this.template({\n            person: person.toJSON()\n        }));\n\n    }\n\n});\n","module.exports = PhoneCommunicationLog = Backbone.View.extend({\n\n    tagName: 'div',\n    template: require('../templates/phonecommunicationlog'),\n\n    render: function() {\n        this.$el.html(this.template({\n            pcl: this.model.toJSON()\n        }));\n    },\n\n});\n\n","var SectionView = require('./section');\nvar SectionCollection = require('../collections/sections');\n\nmodule.exports = Receipt = Backbone.View.extend({\n\n    tagName: 'div',\n    template: require('../templates/receipt'),\n    events: {\n        \"click .receipt\": \"toggleSections\",    \n        //\"click .toggle\": \"toggleSectionsNoDefault\"    \n    },\n\n    initialize: function() {\n        this.collection = new SectionCollection([], { receiptId: this.model.attributes.receiptId });\n        \n    },\n\n    render: function() {\n        this.$el.html(this.template({\n            receipt: this.model.toJSON()\n        }));\n\n\n    \n    },\n    \n    btnState: function(state) {\n        var states = {\n            'opened': \"img/moins.png\",\n            'closed': \"img/plus.png\",\n            'loading': \"img/ajax-loader_b.gif\",\n        };\n\n        this.$el.find('.toggle-btn').attr('src', states[state]);\n    },\n\n    toggleSections: function(event) {\n        if (!this.open) {\n            this.open = true;\n            // submit button reload the page, we don't want that\n            //event.preventDefault();\n            \n            this.btnState('loading');\n\n            this.listenTo(this.collection, \"add\", this.onSectionAdded);\n            // fetch the bookmarks from the database\n            this.collection.fetch();\n\n            //this.$el.find('.toggle-btn').attr('src', \"img/moins.png\");\n\n        } else {\n            this.stopListening(this.collection);\n            this.$el.find('.sections').empty();\n            this.btnState('closed');\n\n            this.open = false;\n        }\n    },\n\n    onSectionAdded: function(section) {\n        this.btnState('opened');\n\n        // render the specific element\n        sectionView = new SectionView({\n            model: section\n        });\n        sectionView.render();\n        this.$el.find('.sections').append(sectionView.$el);\n    }\n    \n});\n\n","//var SectionView = require('./section');\n//var SectionCollection = require('../collections/sections');\n\nvar ReceiptAggergate = require('../models/receiptaggregate');\n\nmodule.exports = ReceiptMonth = Backbone.View.extend({\n\n    tagName: 'div',\n    template: require('../templates/receiptmonth'),\n    templateAggregate : require('../templates/receiptaggregate'),\n    events: {\n        \"click .receipt\": \"toggleSections\",    \n        //\"click .toggle\": \"toggleSectionsNoDefault\"    \n    },\n\n    initialize: function() {\n    },\n\n    render: function() {\n        this.$el.html(this.template({\n            kv: this.model.toJSON()\n        }));\n\n    },\n    \n    btnState: function(state) {\n        var states = {\n            'opened': \"img/moins.png\",\n            'closed': \"img/plus.png\",\n            'loading': \"img/ajax-loader_b.gif\",\n        };\n        this.$el.find('.toggle-btn').attr('src', states[state]);\n    },\n\n    toggleSections: function(event) {\n        if (!this.open) {\n            this.open = true;\n\n            this.btnState('loading');\n\n            // submit button reload the page, we don't want that\n            //event.preventDefault();\n            \n            // get the object / Instantiate it's view.\n            //ra = new ReceiptAggregate({id : this.model.key });\n            //ra.fetch();\n            that = this;\n            ra = new ReceiptAggregate();\n            ra.fetch({ \n                url: 'receipts/aggregates/' + this.model.attributes.key,\n                success: function() {\n                    console.log(ra.toJSON());\n                    that.$el.find('.sections').append(that.templateAggregate({ kv: ra.toJSON() }));\n                   that.btnState('opened');\n                }\n\n            });\n\n            //this.$el.find('.toggle-btn').attr('src', \"img/moins.png\");\n\n        } else {\n            this.stopListening(this.collection);\n            this.btnState('closed');\n            this.$el.find('.sections').empty();\n            this.$el.find('.toggle-btn').attr('src', \"img/plus.png\");\n\n            this.open = false;\n        }\n    },\n\n});\n\n","\nvar ReceiptAggergate = require('../models/receiptaggregate');\n\nmodule.exports = ReceiptMonthAggregate = Backbone.View.extend({\n\n    tagName: 'div',\n    template: require('../templates/receiptmonthaggregate'),\n\n    initialize: function() {\n        this.model = new ReceiptAggregate({id : this.month });\n\n    }, \n\n    render: function() {\n        this.$el.html(this.template({\n            kv: this.model.toJSON()\n        }));\n    },\n\n});\n\n","module.exports = Section = Backbone.View.extend({\n\n    tagName: 'div',\n    template: require('../templates/section'),\n\n    render: function() {\n        this.$el.html(this.template({\n            section: this.model.toJSON()\n        }));\n    },\n\n});\n\n"]}